<!DOCTYPE html>
<html>

<!-- insert into todo(todo_item_id, title, detail) values(1, 'item ttl', 'detaillsss'); -->
<!-- insert into project(project_id, title, description, status) values(9, 'projects title','more detail', 'in progress') ;-->


<!--project list display start-->
<div class="item-display-table project-display-table" th:fragment="project-list-table">
	<div th:object="${project}">
		<div th:each="proj : ${project}" class="project-modal-boxes-container">
			<div class="project-modal-boxes p-4 mb-3">
				<div style="display: block; width: 100%;" th:id="${proj.projectId}">
					<span id="itemNumber" class="badge text-bg-warning itemNumber">0</span>
					<!--<span th:text = "${item.todoItemId}" class="badge text-bg-warning"></span>-->
					<span th:text="${proj.title}" id=""></span>
					<br />
					<span th:text="${proj.description}" class="fw-lighter"></span>
					<span>|</span>
					<span th:text="${proj.status}" class="fw-lighter modal-project-status"></span>


					<!--task display & add-->
					<h5 class="project-task-title mt-2">Tasks</h5>
					<p class="d-block">...list of tasks from db...</p>
					<span id="add-project-task-button" class="add-project-task-button fa-solid fa-plus"
						th:onClick="addProjectTask(this.id)" th:id="${proj.projectId}"></span>
					<script>



						function addProjectTask(id) {

							const title = document.getElementById("title-input").value;
							const detail = document.getElementById("detail-input").value;
							fetch('/project/add-project-task-js?title="' + title + '"&detail="' + detail + '"')


							fetch('todo/add-item-js')
								.then(response => response.text())
								.then(data => {
									alert(data);
								})


							//add-project-task-button
							const addTaskForm = document.getElementById("add-project-task-form" + id);
							if (addTaskForm.style.height == "0px") {
								addTaskForm.style.height = "120px";
							}
							else {
								addTaskForm.style.height = "0";
							}

						}
					</script>
					<div class="add-project-task-form mt-2" th:id="add-project-task-form+''+${proj.projectId}">
						<form class="form">
							<input type="text" placeholder="title" class="form-control mb-1">
							<input type="text" placeholder="description" class="form-control mb-1">
							<input type="submit" value="add" class="btn btn-primary">
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>


<!--add project form-->
<div th:fragment="add-project-form" class="form-container mt-4 p-4 add-todo-item-form"
	id="add-todo-item-form form-container">
	<div>
		<input type="text" class="form-control mt-3" placeholder="Project title" id="project-title-input" autofocus>
		<textarea class="form-control mt-3" placeholder="Project description" id="project-description-input"></textarea>
		<select id="project-status-input" class="form-select mt-3">
			<option selected disabled>Status</option>
			<option>Not Started</option>
			<option>In progress</option>
			<option>Done</option>
		</select>
		<input onClick="addProject()" type="submit" value="Add" class="btn btn-primary btn-sm mt-3">
	</div>
	<script>
		function addProject() {
			const title = document.getElementById("project-title-input").value;
			const description = document.getElementById("project-description-input").value;
			const status = document.getElementById("project-status-input").value;
			fetch('/user/add-project-js?title=' + title + '&description=' + description + '&status=' + status)
				.then(response => response.json())
				.then(data => {
					alert(data);
				})
		}
	</script>
</div>


<!--Project display modal start-->
<div th:fragment="project-list-modal-content" id="project-list-modal-content">
	<span class="d-flex justify-content-	 mt-3">
		<!--<img class="dashboard-card-img-top mx-2" th:src="@{/images/to-do-list.png}" alt="to-do icon">-->
		<span class="dashboard-card-img-top mx-2 mt-1 fa-solid fa-diagram-project" alt="to-do icon"></span>
		<h5 class="card-title dashboard-card-title">Project List</h5>
	</span>
	<hr />

	<div th:replace="/user/todo/todoLayouts :: notification-board"></div>
	<a th:href="@{todo/add-item-form}" class="btn btn-primary-white btn-sm mt-3 mx-3">Create Project</a>
	<button class="btn btn-sm btn-primary-white mt-3" onClick="addContributersForm()">Add
		Members</button>

	<div th:replace="/user/project/project-layouts :: add-project-form"></div>

	<p class="card-text fw-lighter project-count" th:text="${projectCount}"></p><br />
	<div class="d-flex  flex-wrap">
		<!--<form th:action="@{/user/todo/delete-selected}" method="post">-->
		<!--<button type="submit" class="btn btn-danger btn-sm mt-3 float-end" value="Delete Selected"
			id="delete-selected-btn" disabled>
			Delete Selected <span class="badge text-bg-info" id="number-of-items-badge">0</span>
		</button>-->

		<div th:replace="/user/project/project-layouts :: project-list-table"></div>
		<div class="mx-4 p-4 project-modal-boxes"> stat and more info</div>
		<!--</form>-->
	</div>
</div>
<!--Project display modal end-->

<!-- Projects card -->
<div th:fragment="project-dashboard-card" class="card user-dashboard-cards custom-scrollbar-style"
	style="width: 18rem;">
	<div class="card-header d-flex">
		<span class="dashboard-card-img-top mx-2 mt-1 fa-solid fa-diagram-project" alt="project icon"></span>
		<h5 class="card-title dashboard-card-title">Project</h5>
	</div>
	<div class="card-body" onclick="displayViewingModal(1)">
		<a href="#" class="btn btn-primary btn-sm">Create Project</a>
		<p class="card-text fw-lighter project-count" th:text="${projectCount}"></p>
		<table class="table table-striped">
			<tbody th:object="${project}">
				<tr th:each="proj : ${project}">
					<td>
						<div style="display: inline;" th:id="${proj.projectId}">
							<span id="projectNumber" class="badge text-bg-warning itemNumber">0</span>
							<!--<span th:text = "${item.todoItemId}" class="badge text-bg-warning"></span>-->
							<span th:text="${proj.title}" id=""></span>
							<br />
							<span th:text="${proj.description}" class="fw-lighter"></span>
						</div>

					</td>
				</tr>
			</tbody>
		</table>

	</div>
</div>


<!-- Project tasks card-->
<div th:fragment="project-task-dashboard-card" class="card user-dashboard-cards custom-scrollbar-style"
	style="width: 18rem;">
	<div class="card-header d-flex">
		<span class="dashboard-card-img-top mx-2 mt-1 fa-solid fa-list-check" alt="task icon"></span>
		<h5 class="card-title dashboard-card-title">Tasks on board</h5>
	</div>
	<div class="card-body">
		<p class="card-text fw-lighter">There are no tasks at the moment.</p><br />
		<a href="/">Update Task Status</a>
		</br>
		<a href="#" class="btn btn-primary btn-sm">View</a>
	</div>
</div>

</html>