<!DOCTYPE html>
<html xmlns="https://www.thymeleaf.org">

<div th:fragment="notification-board" id="item-action-notification"
	class="badge item-action-notification px-4 d-flex justify-content-center fixed-top" th:text="${param.item}"></div>


<!--todo display modal start-->
<div th:fragment="todo-list-modal-content" id="todo-list-modal-content">
	<span class="d-flex justify-content-	 mt-3">
		<!--<img class="dashboard-card-img-top mx-2" th:src="@{/images/to-do-list.png}" alt="to-do icon">-->
		<span class="dashboard-card-img-top mx-2 mt-1 fa-solid fa-list" alt="to-do icon"></span>
		<h5 class="card-title dashboard-card-title">Todo List</h5>
	</span>
	<hr />

	<div th:replace="/user/todo/todoLayouts :: notification-board"></div>
	<a th:href="@{todo/add-item-form}" class="btn btn-primary-white btn-sm mt-3 mx-3">Add Item</a>
	<button class="btn btn-sm btn-primary-white mt-3" onClick="addContributersForm()">Add
		contributers</button>
	<div th:replace="/user/todo/todoLayouts :: add-todo-item-form"></div>

	<p class="card-text fw-lighter mb-0 item-count todo-card-item-count" th:text="${itemCount}"></p>
	<form th:action="@{/user/todo/delete-selected}" method="post">
		<button type="submit" class="btn btn-danger btn-sm mt-3 float-end" value="Delete Selected"
			id="delete-selected-btn" disabled>
			Delete Selected <span class="badge text-bg-info" id="number-of-items-badge">0</span>
		</button>

		<table th:replace="/user/todo/todoLayouts :: displayItems"></table>
	</form>

</div>
<!--todo display modal end-->


<!--todo list card started-->
<div th:fragment="todo-list-dashboard-card" class="card user-dashboard-cards todo-list-card custom-scrollbar-style"
	style="width: 18rem;" th:href="@{/todo}">
	<div class="card-header d-flex">
		<span class="dashboard-card-img-top mx-2 mt-1 fa-solid fa-list" alt="to-do icon"></span>
		<h5 class="card-title dashboard-card-title">Todo List</h5>
	</div>
	<div class="card-body" onclick="displayViewingModal(0)">

		<a th:href="@{/todo/add-item-form}" class="btn btn-primary btn-sm">Add Item</a>
		<p class="card-text fw-lighter mb-0 item-count todo-card-item-count" th:text="${itemCount}"></p>
		<table class="table table-striped">
			<tbody th:object="${items}">
				<tr th:each="item : ${items}">
					<td>
						<div style="display: inline;" th:id="${item.todoItemId}">
							<span id="itemNumber" class="badge text-bg-warning itemNumber">0</span>
							<!--<span th:text = "${item.todoItemId}" class="badge text-bg-warning"></span>-->
							<span th:text="${item.title}" id=""></span>
							<br />
							<span th:text="${item.detail}" class="fw-lighter"></span>
						</div>

					</td>
				</tr>
			</tbody>
		</table>
	</div>
</div>


<!--list todo items table started-->
<table th:fragment="displayItems" class="table item-display-table">
	<tbody th:object="${items}">
		<tr th:each="item : ${items}">
			<td>
				<div style="display: inline;" th:id="${item.todoItemId}">
					<span id="itemNumber" class="badge text-bg-warning itemNumber">0</span>
					<!--<span th:text = "${item.todoItemId}" class="badge text-bg-warning"></span>-->
					<span th:text="${item.title}" id=""></span>

					<span class="badge mx-2 edit-item-btn fa-solid fa-edit" title="Edit Item"
						th:onClick="editItem(this.id)" th:id="${item.todoItemId}"> </span>

					<br />
					<span th:text="${item.detail}" class="fw-lighter"></span>
				</div>

				<div class="item-deletion-controls" style="display: inline;">
					<span class="float-end delete-item-checkbox item-control-buttons">
						<input type="checkbox" onClick="readyDeleteButton()" name="selectedForRemoval"
							th:value="${item.todoItemId}" class="form-check-input checkbox-for-deletion red-checkbox"
							id="checkbox-for-deletion" title="Select item">
					</span>

					<a th:href="@{/todo/delete-item(itemId=${item.todoItemId})}"
						class="link-white-color float-end delete-single-item-link">
						<span class="badge text-bg-danger delete-single-item-btn" title="Delete Item">&times;</span>
					</a>
				</div>

			</td>
		</tr>
	</tbody>
</table>

<div class="add-contributers-form" id="add-contributers-form" th:fragment="add-contributers-form">
	<form>

	</form>
</div>


<div th:fragment="add-todo-item-form" class="form-container mt-4 p-4 add-todo-item-form"
	id="add-todo-item-form form-container">
	<div>
		<input type="text" class="form-control mt-3" placeholder="Item title" id="title-input" autofocus>
		<textarea class="form-control mt-3" placeholder="detail description" id="detail-input"></textarea>
		<input onClick="addTodo()" type="submit" value="Add" class="btn btn-primary btn-sm mt-3">
	</div>
	<script>
		function addTodo() {
			const title = document.getElementById("title-input").value;
			const detail = document.getElementById("detail-input").value;
			//fetch('/todo/add-item-js?title="title"&detail="detail"')
			fetch('/todo/add-item-js?title="' + title + '"&detail="' + detail + '"')
				//fetch('/todo/add-item-js?title="'+"quuu"+'"&detail="'+"qoooo"+'"')
				.then(response => response.json())
				.then(data => {
					alert(data);
				})

			/*const title2 = document.getElementById("title-input").value;
			const detail2 = document.getElementById("detail-input").value;
			const jsn = 
			//fetch('/todo/add-item-js?title="title"&detail="detail"')
			fetch('/todo/add-item-js?title="' + title + '"&detail="' + detail + '"')
				//fetch('/todo/add-item-js?title="'+"quuu"+'"&detail="'+"qoooo"+'"')
				.then(response => response.json())
				.then(data => {
					alert(data);
				})*/
		}
	</script>
</div>


<!--<div th:fragment="add-todo-item-form" class="form-container mt-4 p-4 add-todo-item-form"
	id="add-todo-item-form form-container">
	<form th:action="@{/todo/add-item}" method="post" th:object="${todoModel}">
		<input type="text" th:field="${todoModel.title}" class="form-control mt-3" placeholder="Item title" autofocus>
		<textarea th:field="${todoModel.detail}" class="form-control mt-3" placeholder="detail description"></textarea>
		<input type="submit" value="Add" class="btn btn-primary btn-sm mt-3">
	</form>
</div>-->


</html>