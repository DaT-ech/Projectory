<!DOCTYPE html>
<html xmlns="https://www.thymeleaf.org">
	<head th:replace = "mainLayouts :: head"></head>	
	<header th:replace = "/user/user-layouts :: nav"></header>
<body onLoad="showActionNotification(), displayItemCount()">
		<div class="container">
		<div th:replace = "/user/todo/todoLayouts :: notification-board"></div>
		<a th:href="@{todo/add-item-form}" class="btn btn-primary btn-sm mt-3">Add Item</a> 
		<button class="btn btn-sm btn-primary-white mt-3" onClick="addContributersForm()">Add contributers</button>
		<form th:action="@{/user/todo/delete-selected}" method="post">
		<button type="submit" class="btn btn-danger btn-sm mt-3 float-end" value="Delete Selected" id="delete-selected-btn" disabled>
			Delete Selected <span class="badge text-bg-info" id="number-of-items-badge">0</span>
		</button>
		
		<table th:replace = "/user/todo/todoLayouts :: displayItems"></table>
		</form>
		
		<script>
			function readyDeleteButton(){
				var checkboxes = document.getElementsByClassName("checkbox-for-deletion");
				var delBtn = document.getElementById("delete-selected-btn");
				var numberOfItems=document.getElementById("number-of-items-badge");
				var num = 0;
				for(var checkbox of checkboxes){
					if(checkbox.checked === true){
						num++;
					}
				}
				numberOfItems.innerHTML = num;
				if(num > 0){
					delBtn.removeAttribute("disabled");					
				}
				else{
					delBtn.setAttribute("disabled", true);
				}
			}
			
			function displayItemCount(){
				var items = document.getElementsByClassName("itemNumber");
				var counter = 0;
				for(let item of items){ 
					item.innerHTML = ++counter;

				}
			}
			
			function addContributersForm(){
				
			}
				
				
		</script>
		
		<script th:replace = "/user/todo/todoLayouts :: notificationScripts"></script>
			
	</div>
</body>
</html>